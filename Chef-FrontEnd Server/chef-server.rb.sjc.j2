# This file generated by chef-backend-ctl gen-server-config
# Modify with extreme caution.

fqdn "{{ansible_host}}"

use_chef_backend true
chef_backend_members ["XXXx", "XXXx", "XXXX"]

haproxy['remote_postgresql_port'] = 5432
haproxy['remote_elasticsearch_port'] = 9200

# Specify that postgresql is an external database, and provide the
# VIP of this cluster.  This prevents the chef-server instance
# from creating it's own local postgresql instance.
postgresql['external'] = true
postgresql['vip'] = '127.0.0.1'
postgresql['db_superuser'] = 'chef_pgsql'
postgresql['db_superuser_password'] = 'XXXXXXXXX01214567085013e0c4a8c213f'

# These settings ensure that we use remote elasticsearch
# instead of local solr for search.  This also
# set search_queue_mode to 'batch' to remove the indexing
# dependency on rabbitmq, which is not supported in this HA configuration.
opscode_solr4['external'] = true
opscode_solr4['external_url'] = 'http://127.0.0.1:9200'
opscode_erchef['search_provider'] = 'elasticsearch'
opscode_erchef['search_queue_mode'] = 'batch'

# HA mode requires sql-backed storage for bookshelf.
bookshelf['storage_type'] = :sql

# RabbitMQ settings

# At this time we are not providing a rabbit backend. Note that this makes
# this incompatible with reporting and analytics unless you're bringing in
# an external rabbitmq.
rabbitmq['enable'] = false
rabbitmq['management_enabled'] = false
rabbitmq['queue_length_monitor_enabled'] = false

# Opscode Expander
#
# opscode-expander isn't used when the search_queue_mode is batch.  It
# also doesn't support the elasticsearch backend.
opscode_expander['enable'] = false

# Prevent startup failures due to missing rabbit host
dark_launch['actions'] = false

# Cookbook Caching
opscode_erchef['nginx_bookshelf_caching'] = :on
opscode_erchef['s3_url_expiry_window_size'] = '50%'

ldap['base_dn'] = 'cn=users,cn=accounts,dc=mmracks,dc=internal'
ldap['bind_dn'] = 'uid=sudo,cn=sysaccounts,cn=etc,dc=mmracks,dc=internal'
ldap['bind_password'] = 'xxXx'
ldap['host'] = 'ipa-x2.pao.mmracks.internal'
ldap['login_attribute'] = 'uid'
ldap['port'] = '389'
ldap['system_adjective'] = "Free IPA Credentials"

# Estatsd
estatsd['enable'] = true
estatsd['protocol'] = 'statsd'
estatsd['vip'] = '10.180.96.20'
estatsd['port'] = '57475'

# folsom
folsom_graphite['enabled'] = true
folsom_graphite['host'] = 'STATS SERVER XXXX'
folsom_graphite['port'] = 2013
folsom_graphite['prefix']='LABEL XXXX'
